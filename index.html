<!DOCTYPE html>
<html>
  <head>
    <title>PancakeSwap Testnet Demo</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.5/dist/web3.min.js"></script>
  </head>
  <body>
    <h2>Wallet: <span id="wallet">Not Connected</span></h2>
    <h3>BNB Balance: <span id="balance">0.00</span></h3>
    <button onclick="connectWallet()">Connect Wallet</button>
    <br><br>
    <button onclick="swap()">Swap 0.01 BNB â†’ Test Token</button>

    <script>
      let web3;
      let account;

      async function connectWallet() {
        if (window.ethereum) {
          web3 = new Web3(window.ethereum);
          try {
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            account = accounts[0];
            document.getElementById('wallet').innerText = account;

            const balance = await web3.eth.getBalance(account);
            const ethBalance = web3.utils.fromWei(balance, 'ether');
            document.getElementById('balance').innerText = parseFloat(ethBalance).toFixed(4);
          } catch (error) {
            console.error("Connection Error:", error);
          }
        } else {
          alert("MetaMask not detected!");
        }
      }

      async function swap() {
        if (!account) {
          alert("Connect wallet first!");
          return;
        }

        const tx = {
          from: account,
          to: "0xEc0EA1a818050F518D5498ee8456BE219D70161F", // Change this to your token swap contract
          value: web3.utils.toWei('0.01', 'ether'),
        };

        try {
          await web3.eth.sendTransaction(tx);
          alert("Swap Successful! (0.01 BNB sent to contract)");
        } catch (error) {
          alert("Swap Failed: " + error.message);
        }
      }
    </script>
  </body>
</html>
